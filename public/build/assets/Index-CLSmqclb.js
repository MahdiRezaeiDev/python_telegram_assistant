import{r as t,j as e,H as f,b as m}from"./app-BqfSY66W.js";import{A as p,U as b}from"./AuthenticatedLayout-BD6RdAD5.js";import{L as j}from"./loader-circle-DQ-HXIqi.js";import{c as y}from"./createLucideIcon-Hng2jIgv.js";import"./transition-CYzJCn0g.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],v=y("send",w),N="/build/assets/telegram-Czr9HcVa.svg",k="/build/assets/wallpaper-4z2eW2MI.jpg";function S(){const[r,x]=t.useState([]),[l,o]=t.useState(""),[h,g]=t.useState(!0),i=t.useRef(null),n=async()=>{try{const s=await m.post(route("response.get"));x(s.data)}catch(s){console.error("Error fetching messages:",s)}finally{g(!1)}};t.useEffect(()=>{n();const s=setInterval(n,3e3);return()=>clearInterval(s)},[]),t.useEffect(()=>{i.current?.scrollIntoView({behavior:"smooth"})},[r]);const c=async()=>{l.trim()&&(await m.post("/api/messages",{message:l}),o(""),n())};return e.jsxs(p,{title:"پیام‌های گروه",children:[e.jsx(f,{title:"پیام‌های گروه"}),e.jsxs("div",{className:"mx-auto flex h-screen max-w-2xl flex-col bg-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between border-b bg-white/90 p-3 shadow backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:N,alt:"Telegram",className:"h-8 w-8 rounded-full"}),e.jsx("h2",{className:"font-semibold text-gray-800",children:"گروه تلگرام"})]})}),e.jsxs("div",{className:"relative flex-1 overflow-y-auto p-4",style:{backgroundImage:`url(${k})`,backgroundRepeat:"repeat",backgroundSize:"auto",backgroundColor:"#e3f2fd"},children:[e.jsx("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-[1px]"}),e.jsxs("div",{className:"relative space-y-3",children:[h?e.jsxs("div",{className:"flex h-full items-center justify-center text-gray-500",children:[e.jsx(j,{className:"mr-2 h-6 w-6 animate-spin"}),"در حال بارگذاری پیام‌ها..."]}):r.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"پیامی وجود ندارد"}):r.map(s=>{const a=s.outgoing&&s.outgoing.length>0,d=s.sender?.full_name||s.sender?.username||"کاربر ناشناس",u=s.sender?.profile_photo_path||null;return e.jsxs("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:[!a&&e.jsx("div",{className:"mr-2 mt-auto flex h-8 w-8 items-center justify-center",children:u?e.jsx("img",{src:u,alt:d,className:"h-8 w-8 rounded-full border border-gray-300 object-cover"}):e.jsx(b,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{className:`max-w-xs rounded-2xl px-4 py-2 shadow-md transition md:max-w-md ${a?"rounded-br-none bg-blue-500 text-white shadow-blue-100":"rounded-bl-none bg-white/90 text-gray-800 shadow-gray-200"}`,children:[!a&&e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:d}),e.jsx("p",{className:"whitespace-pre-wrap",children:a?s.outgoing[0]?.response:s.message}),e.jsx("p",{className:"mt-1 text-right text-xs text-gray-500",children:s.created_at?new Date(s.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})]},s.id)}),e.jsx("div",{ref:i})]})]}),e.jsxs("div",{className:"flex items-center gap-2 border-t bg-white/90 p-3 backdrop-blur-sm",children:[e.jsx("input",{type:"text",placeholder:"ارسال پیام به گروه....",value:l,onChange:s=>o(s.target.value),onKeyDown:s=>s.key==="Enter"&&c(),className:"flex-1 rounded-full border border-gray-300 bg-white/70 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"}),e.jsx("button",{onClick:c,className:"rounded-full bg-blue-500 p-2 text-white transition hover:bg-blue-600",children:e.jsx(v,{className:"h-5 w-5"})})]})]})]})}export{S as default};
