import{r,j as e,H as M,d as D,b as j}from"./app-BqfSY66W.js";import{A as E}from"./AuthenticatedLayout-BD6RdAD5.js";import{T,t as c}from"./index-BiFnSlCp.js";import{c as L}from"./createLucideIcon-Hng2jIgv.js";import{T as I}from"./trash-CNp69a9K.js";import"./transition-CYzJCn0g.js";import"./index-CjicLJss.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],H=L("pencil",z);function B({prices:l}){const[i,x]=r.useState(l.data),[m,N]=r.useState(null),[d,n]=r.useState({code:"",price:""}),[u,h]=r.useState(!1),[v,p]=r.useState(!1),[o,g]=r.useState(null),w=t=>{N(t),n({code:t.code_name,price:t.price}),p(!0)},y=()=>p(!1),k=async t=>{if(t.preventDefault(),!!m){h(!0);try{const a=(await j.put(route("prices.update",m.id),d)).data.updatedPrice;x(C=>C.map(f=>f.id===a.id?a:f)),c.success("قیمت با موفقیت بروزرسانی شد",{position:"bottom-left"}),y()}catch(s){console.error(s),c.error("خطا در بروزرسانی قیمت",{position:"bottom-left"})}finally{h(!1)}}},S=t=>g(t),b=()=>g(null),_=async()=>{if(o)try{await j.delete(route("prices.destroy",o.id)),x(t=>t.filter(s=>s.id!==o.id)),c.success("قیمت حذف شد",{position:"bottom-left"}),b()}catch(t){console.error(t),c.error("خطا در حذف قیمت",{position:"bottom-left"})}};return e.jsxs(E,{title:"لیست قیمت‌ها",children:[e.jsx(M,{title:"لیست قیمت‌ها"}),e.jsx(T,{richColors:!0}),e.jsxs("div",{className:"mx-auto max-w-6xl p-6",children:[e.jsx("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"لیست قیمت‌ها"})}),e.jsxs("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 font-medium text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"فروشنده"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"کد فنی قطعه"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"قیمت"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"عملیات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:i.length>0?i.map((t,s)=>e.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:(l.current_page-1)*l.per_page+(s+1)}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:t.seller.full_name}),e.jsx("td",{className:"px-4 py-3 text-gray-800",children:t.code_name}),e.jsx("td",{className:"px-4 py-3 text-gray-800",children:t.price.toLocaleString()}),e.jsxs("td",{className:"flex justify-center gap-2 px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>w(t),className:"text-yellow-500 hover:text-yellow-600",title:"ویرایش",children:e.jsx(H,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>S(t),className:"text-red-600 hover:text-red-700",title:"حذف",children:e.jsx(I,{className:"h-5 w-5"})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"py-4 text-center text-gray-500",children:"هیچ قیمتی یافت نشد."})})})]}),l.links.length>3&&e.jsx("div",{className:"my-4 flex justify-center",children:l.links.map((t,s)=>{let a=t.label;return a.includes("Next")?a="بعدی":a.includes("Previous")&&(a="قبلی"),e.jsx("button",{onClick:()=>t.url&&D.get(t.url),className:`mx-1 rounded px-3 py-1 text-sm ${t.active?"bg-cyan-700 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"} ${t.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:a}},s)})})]}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"animate-fadeIn w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-800",children:"ویرایش قیمت"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"کد فنی قطعه"}),e.jsx("input",{type:"text",value:d.code,onChange:t=>n({...d,code:t.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"قیمت"}),e.jsx("input",{type:"text",value:d.price,onChange:t=>n({...d,price:t.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700",required:!0})]}),e.jsxs("div",{className:"mt-4 flex justify-start gap-3",children:[e.jsx("button",{type:"submit",disabled:u,className:"rounded-lg bg-sky-600 px-4 py-2 text-white hover:bg-sky-700 disabled:opacity-60",children:u?"در حال ذخیره...":"ذخیره"}),e.jsx("button",{type:"button",onClick:y,className:"rounded-lg bg-gray-300 px-4 py-2 hover:bg-gray-400",children:"لغو"})]})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"animate-fadeIn w-full max-w-sm rounded-2xl bg-white p-6 shadow-xl",children:[e.jsx("h2",{className:"mb-4 text-lg font-bold text-gray-800",children:"حذف قیمت"}),e.jsxs("p",{className:"mb-4 text-gray-700",children:["آیا مطمئن هستید که می‌خواهید قیمت قطعه"," ",e.jsx("span",{className:"font-medium",children:o.code_name})," ","را حذف کنید؟"]}),e.jsxs("div",{className:"flex justify-start gap-3",children:[e.jsx("button",{onClick:_,className:"rounded-lg bg-red-600 px-4 py-2 text-white hover:bg-red-700",children:"حذف"}),e.jsx("button",{onClick:b,className:"rounded-lg bg-gray-300 px-4 py-2 hover:bg-gray-400",children:"لغو"})]})]})})]})]})}export{B as default};
